---
import Taskbar from "./Taskbar/Taskbar.astro";
import StartMenu from "./StartMenu.astro";
---

<div class="min-h-screen bg-[#245edc] relative">
  <Taskbar />
  <StartMenu open={false} />
</div>

<script is:inline>
  alert("Script is running!");
  document.addEventListener("DOMContentLoaded", () => {
    let isMenuOpen = false;
    const startBtn = document.getElementById("xp-start-btn");
    const startMenu = document.getElementById("xp-start-menu");

    function toggleMenu(e) {
      e?.stopPropagation?.();
      isMenuOpen = !isMenuOpen;
      if (startMenu) {
        startMenu.classList.toggle("hidden", !isMenuOpen);
      }
    }

    if (startBtn) {
      startBtn.addEventListener("click", toggleMenu);
    }

    document.addEventListener("mousedown", (e) => {
      if (
        startMenu &&
        !startMenu.contains(e.target) &&
        !startBtn.contains(e.target)
      ) {
        isMenuOpen = false;
        startMenu.classList.add("hidden");
      }
    });
  });
</script>
